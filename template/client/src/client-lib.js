!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["client-lib"]=t():e["client-lib"]=t()}(global,(function(){return e={150:e=>{"use strict";e.exports=JSON.parse('{"webpackDevPort":8080,"serverDevPort":3000}')},737:e=>{const t={playAnimation:function(e,t,i,s){e.animations[t]||(e.animations={...e.animations,[t]:{startTime:Date.now(),attribute:t,dValue:i,duration:s}})},handleAnimations:function(e){const{game:t}=this;Object.values(t.state[e]).forEach((e=>{for(let t in e.animations){const i=e.animations[t];if(i){i.currentValue||(i.currentValue=0);const{startTime:t,duration:s,dValue:n,attribute:a}=i,o=Date.now(),c=(o-t)/s;e[a]+=n*c-i.currentValue,i.currentValue=n*c,o>=t+s&&delete e.animations[a]}}}))}};e.exports={server:t}},541:e=>{function t(e,t,i,s){const n="x"===i?[t.x-t.width/2,t.x+t.width/2]:[t.y-t.height/2,t.y+t.height/2],a="x"===i?e.width:e.height;return s<0?n[1]+a/2:n[0]-a/2}function i(e,t,i){const s=e[i]>t[i]?1:-1,n="x"===i?"y":"x";return Math.sqrt(Math.pow(e.width/2+t.width/2+2e-6,2)-Math.pow(e[n]-t[n],2))*s+t[i]}function s(e,t,s,n){const a=e.width/2;let o=[];for(let e in n)n[e]<a&&o.push(e);const c={left:!1,top:!1,right:!0,bottom:!0};function r(n,a){const r=t.x+t.width/2*(c[n]?1:-1),l=t.y+t.height/2*(c[a]?1:-1),h=c[n]?[r,e.x]:[e.x,r],d=c[a]?[l,e.y]:[e.y,l];if(o.includes(n+"Dist")&&o.includes(a+"Dist")&&h[0]<h[1]&&d[0]<d[1]){newPos=i(e,{x:r,y:l,width:0},s);const t=c["x"===s?n:a]?[e[s],newPos]:[newPos,e[s]];return t[0]<t[1]?newPos:e[s]}}return r("left","top")||r("left","bottom")||r("right","top")||r("right","bottom")||-1}const n={useBarrier:function(e,t){const{barriers:i}=this.game;Object.keys(i).includes(e)?i[e].push(t):i[e]=[t]},checkBarriers:function(e,n,a){const{barriers:o,shapes:c}=this.game;let r=!0,l=-1;return Object.keys(o).includes(e.type)&&o[e.type].forEach((o=>{this.handleCollision({...e,[n]:e[n]+a},o,((e,h,d)=>{if(r=!1,"circle"===c[o]&&"circle"===c[e.type])l=i(e,h,n);else if("circle"===c[o]){const i=s(h,e,n,d);l=-1!==i?e[n]+h[n]-i:t(e,h,n,a)}else if("circle"===c[e.type]){const i=s(e,h,n,d);l=-1!==i?i:t(e,h,n,a)}else l=t(e,h,n,a)}))})),{validMove:r,fallbackPos:l}}};e.exports={server:n}},222:e=>{const t={addCharacters:function(e,t=1){this.game[e]={},this.game.scales[e]=t,this.sendSpriteSize(e,t)},getCharacters:function(e,t=function(){},i=function(){},s=function(){}){const{game:n}=this,a=this;n.roomJoined?(n.room.listen(e+"/:id",(function(s){if("add"===s.operation){const{id:i,x:a,y:o,spriteName:c}=s.value;let r=n.add.container(a,o),l=n.front_layer.create(0,0,c||e);r.add([l]),r.setScale(n.scales[e]||1),n[e][i]={sprite:r,...s.value,attached:{}},s.value.rotation&&(r.rotation=s.value.rotation),t(n[e][i],s.value)}else if("remove"===s.operation){const{id:t}=s.path;for(item in n[e][t].sprite.destroy(),n[e][t].attached)n[e][t].attached[item].sprite.destroy();delete n[e][t],i(t)}})),n.room.listen(e+"/:id/:attribute",(function(t){if("selectedItem"===t.rawPath[2]&&n.room.sessionId===t.path.id){const e=document.getElementsByClassName("selected");e.length>0&&(e[0].classList.remove("selected"),document.getElementsByClassName("item")[t.value].classList.add("selected"))}if("add"===t.operation&&t.value&&t.value.type){const{x:i,y:s}=n[e][t.value.id].sprite;if("text"===t.value.type){let a=n.add.text(i+t.value.x,s+t.value.y,` ${t.value.text} `,{color:"white",backgroundColor:"rgba(0,0,0,0.7)"}).setScale(t.value.scale);n[e][t.value.id].attached[t.value.name]={...t.value,sprite:a}}if("item"===t.value.type){const i=t.value.scale/n[e][t.value.id].sprite._scaleX;let s=n.front_layer.create(t.value.x*(1/n[e][t.value.id].sprite._scaleX),t.value.y*(1/n[e][t.value.id].sprite._scaleX),t.value.name).setScale(i);a.sendSpriteSize(t.value.name,t.value.scale||1),n[e][t.value.id].sprite.add(s),n[e][t.value.id].attached[t.value.name]={...t.value,sprite:s}}if("bar"===t.value.type){let a=new Phaser.Geom.Rectangle(0,0,t.value.width,t.value.height),o=n.add.graphics({fillStyle:{color:"0x999999"}});a=o.fillRectShape(a),n[e][t.value.id].attached[t.value.name+"Background"]={...t.value,sprite:a};let c=new Phaser.Geom.Rectangle(0,0,t.value.width,t.value.height);o=n.add.graphics({fillStyle:{color:"0x999900"}}),c=o.fillRectShape(c),a.x=i+t.value.x,c.x=i+t.value.x,a.y=s+t.value.y,c.y=s+t.value.y,c.setScale(100/t.value,1),n[e][t.value.id].attached[t.value.name]={...t.value,sprite:c}}}if("remove"===t.operation&&(n[e][t.path.id].attached[t.path.attribute].sprite.destroy(),"bar"===n[e][t.path.id].attached[t.path.attribute].type&&n[e][t.path.id].attached[t.path.attribute+"Background"].sprite.destroy(),delete n[e][t.path.id].attached[t.path.attribute]),"replace"===t.operation){const{id:i,attribute:a}=t.path;if("x"===a||"y"===a){for(let s in n[e][i].attached)"item"!==n[e][i].attached[s].type&&(n[e][i].attached[s].sprite[a]=t.value+n[e][i].attached[s][a]);n[e][i].sprite[a]=t.value}else"rotation"===a?n[e][i].sprite[a]=t.value:"spriteName"===a?n[e][i].sprite.list[0].setTexture(t.value):n[e][i][a]=t.value;s(i,a,t.value)}})),n.room.listen(e+"/:id/:attribute/:id",(function(t){if("add"===t.operation&&"items"===t.rawPath[2])document.getElementsByClassName("item")[t.value.index].style.background="url(../asset/"+t.value.image,document.getElementsByClassName("item")[t.value.index].style.backgroundSize="contain",document.getElementsByClassName("item")[t.value.index].style.backgroundPosition="center",document.getElementsByClassName("item")[t.value.index].style.backgroundRepeat="no-repeat",document.getElementsByClassName("item")[t.value.index].setAttribute("name",t.value.name),t.value.uses?document.getElementsByClassName("used")[t.value.index].innerHTML=t.value.uses:document.getElementsByClassName("used")[t.value.index].innerHTML="∞",document.getElementsByClassName("used")[t.value.index].style.display="block";else if("remove"===t.operation&&"items"===t.rawPath[2]){let e=document.getElementById("item-bar");e.removeChild(document.getElementsByName(t.path.id)[0]);let i=document.createElement("div");i.className="item",e.appendChild(i),document.getElementsByClassName("item")[0].classList.add("selected")}"filled"===t.path.id&&n[e][t.rawPath[1]].attached[t.rawPath[2]].sprite.setScale(t.value/100,1),"text"===t.path.id&&n[e][t.rawPath[1]].attached[t.rawPath[2]].sprite.setText(t.value),s(t.rawPath[1],t.path.id,t.value)})),n.room.listen(e+"/:id/:attribute/:id/:attribute",(function(e){"items"===e.rawPath[2]&&"uses"===e.path.attribute&&n.room.sessionId===e.rawPath[1]&&(document.getElementsByName(e.path.id)[0].firstChild.innerHTML=e.value)}))):this.addConnectEvent("getCharacters",[e,t,i,s])}},i={setupCharacters:function(e,t="box"){this.game.state[e]={},this.counts[e]=0,this.game.shapes[e]=t},createACharacter:function(e,t,i){this.game.state[e][t]={rotation:0,...this.getSize(e),...i,id:t,type:e,items:{},selectedItem:0,animations:{}}},getACharacter:function(e,t){return this.game.state[e][t]},getAllCharacters:function(e,t){Object.keys(this.game.state[e]).forEach(((i,s)=>{t(this.game.state[e][i],s)}))},deleteACharacter:function(e,t){delete this.game.state[e][t]},nextCharacterId:function(e){return this.counts[e]+=1,`${e}${this.counts[e]}`},attachTo:function(e,t,i){if(i.item){const s=i.item;delete i.item,this.game.state[e][t][s.name]={...i,...s,x:i.x||0,y:i.y||0,type:"item",scale:i.scale||1,id:t},this.game.state[e][t].items[s.name].x=i.x,this.game.state[e][t].items[s.name].y=i.y,this.game.state[e][t].items[s.name].ownerId=t,this.game.state[e][t].items[s.name].scale=i.scale}else this.game.state[e][t][i.name]={...i,id:t}},getRotationTowards:function(e,t,i){return e.x-t<0?Math.atan((e.y-i)/(e.x-t))+Math.PI/2:Math.atan((e.y-i)/(e.x-t))-Math.PI/2},getXTowards:function(e,t,i){return Math.cos(this.getRotationTowards(e,t,i)-Math.PI/2)},getYTowards:function(e,t,i){return Math.sin(this.getRotationTowards(e,t,i)-Math.PI/2)},unAttach:function(e,t,i){delete this.game.state[e][t][i]},follow:function(e,t,i=0,s=1,n=(()=>{})){Object.keys(this.game.state[t]).length>=1&&Object.keys(this.game.state[t]).forEach((a=>{if(Object.keys(this.game.state[e]).length>=1){const{x:o,y:c}=this.game.state[t][a];let r=null,l=0;if(Object.keys(this.game.state[e]).forEach((t=>{if(null===r)r=t,l=Math.sqrt((o-this.game.state[e][t].x)**2+(c-this.game.state[e][t].y)**2);else{let i=o-this.game.state[e][t].x,s=c-this.game.state[e][t].y,n=Math.sqrt(i**2+s**2);n<=l&&(r=t,l=n)}})),!(l<i||0===l)){let i,l,h=o-this.game.state[e][r].x,d=c-this.game.state[e][r].y;h>=0?(i=Math.cos(Math.atan(d/h)),l=Math.sin(Math.atan(d/h))):(i=-Math.cos(Math.atan(d/h)),l=-Math.sin(Math.atan(d/h))),this.move(this.game.state[t][a],"x",-i*s),this.move(this.game.state[t][a],"y",-l*s),n(this.game.state[e][r],this.game.state[t][a])}}}))}};e.exports={client:t,server:i}},754:(e,t,i)=>{const s=i(391),{clientMethods:n,linkMethods:a,version:o}=i(225),c=i(150),r="localhost"===window.location.hostname?"ws://localhost:"+c.serverDevPort:`${window.location.protocol.replace("http","ws")}//${window.location.hostname}`;e.exports=class{constructor(){this.version=o,this.game=null,this.keys=null,this.connectEvents={},this.colyseus=new s.Client(r)}showVersion(){const e=`┃  IO Game Library v${this.version}    ┃`;let t="┃  https://codecontest.org";t+=" ".repeat(e.length-t.length-1),t+="┃";const i="━".repeat(e.length-2),s=`┏${i}┓`,n=`┗${i}┛`;console.log(`\n${s}\n${e}\n${t}\n${n}\n `)}setup(e){this.showVersion(),this.game=e,e.room=null,e.roomJoined=!1,e.cursors=null,e.width=0,e.height=0,e.scales={},e.front_layer=e.add.group(),document.addEventListener("click",(function(t){if(!t.path.includes(document.getElementById("input-overlay"))&&e.click){const i=t.clientX-window.innerWidth/2,s=t.clientY-window.innerHeight/2;e.click(e.cameras.main.scrollX+window.innerWidth/2+i,e.cameras.main.scrollY+window.innerHeight/2+s)}})),document.addEventListener("mousemove",(function(t){if(e.mousemove){const i=t.clientX-window.innerWidth/2,s=t.clientY-window.innerHeight/2;e.mousemove(e.cameras.main.scrollX+window.innerWidth/2+i,e.cameras.main.scrollY+window.innerHeight/2+s)}})),a(this,n)}}},892:e=>{class t{constructor(e,t,i,s){this.width=Number.isNaN(i)?0:i,this.height=Number.isNaN(s)?0:s,this.x=!Number.isNaN(e)&&e>=0?e-this.width/2:-100,this.y=!Number.isNaN(t)&&t>=0?t-this.height/2:-100}collide(e){let s=-1,n=!1;if(e instanceof t)n=this.x<e.x+e.width&&this.x+this.width>e.x&&this.y<e.y+e.height&&this.y+this.height>e.y;else if(e instanceof i){const t=e.collide(this);n=t.collided,s=t.distance}else console.log(" * CollisionBox.collide: You can only collide with another collision object!");return{collided:n,distance:s}}}class i{constructor(e,t,i){this.x=!Number.isNaN(e)&&e>=0?e:-100,this.y=!Number.isNaN(t)&&t>=0?t:-100,this.radius=Number.isNaN(i)?0:i/2}distanceTo(e){let s=-1;if(e instanceof i){const t=this.x-e.x,i=this.y-e.y;s=Math.sqrt(t*t+i*i)}else if(e instanceof t){const t=Math.abs(e.height*this.x+e.x*e.y-e.x*(e.y+e.height))/Math.sqrt(e.height**2),i=Math.abs(e.height*this.x+(e.x+e.width)*e.y-(e.x+e.width)*(e.y+e.height))/Math.sqrt(e.height**2),n=Math.abs(-e.width*this.y+(e.x+e.width)*e.y-e.x*e.y)/Math.sqrt(e.width**2),a=Math.abs(-e.width*this.y+(e.x+e.width)*(e.y+e.height)-e.x*(e.y+e.height))/Math.sqrt(e.width**2),o=this.x-(e.x+e.width/2),c=this.y-(e.y+e.height/2);s={leftDist:t,rightDist:i,topDist:n,bottomDist:a,centerDist:Math.sqrt(o*o+c*c)}}else console.log(" * CollisionCircle.distanceTo: You can only check with another collision object!");return s}collide(e){let s=-1,n=!1;if(e instanceof i)s=this.distanceTo(e),n=s<this.radius+e.radius;else if(e instanceof t){s=this.distanceTo(e);const{leftDist:t,rightDist:i,topDist:a,bottomDist:o,centerDist:c}=s,r=t<this.radius||i<this.radius||this.x>e.x&&this.x<e.x+e.width,l=a<this.radius||o<this.radius||this.y>e.y&&this.y<e.y+e.height,h=Math.sqrt((e.width/2)**2+(e.height/2)**2);n=r&&l&&c<this.radius+h}else console.log(" * CollisionCircle.collide: You can only collide with another collision object!");return{collided:n,distance:s}}}const s={handleCollision:function(e,s,n){const{state:a,shapes:o}=this.game,c="string"==typeof e?o[e]:o[e.type],r="string"==typeof s?o[s]:o[s.type];Object.entries("string"==typeof e?a[e]:{[e.id]:e}).forEach((function([e,o]){const{x:l,y:h,width:d,height:u}=o,m="circle"===c?new i(l,h,d):new t(l,h,d,u);Object.entries("string"==typeof s?a[s]:{[s.id]:s}).forEach((function([s,a]){if(e!==s){const{x:e,y:s,width:c,height:l}=a,h="circle"===r?new i(e,s,c):new t(e,s,c,l),d=m.collide(h);d.collided&&n(o,a,d.distance)}}))}))},handleItemCollision:function(e,t,i,s){const n=this,{game:a}=this;Object.values(a.state[e]).forEach((e=>{const o=n.getSelectedItem(e);if(o.name===t){const t=a.sizes[o.name];if(t&&o.swinging){const{width:a,height:o}=t,{x:c,y:r}=n.getItemPosition(e);n.handleCollision({width:a,height:o,x:c,y:r},i,s)}}}))}};e.exports={server:s}},228:e=>{e.exports={client:{connect:function(e={}){const{game:t,colyseus:i,connectEvents:s}=this;let n=this;t.room=i.join("main",e),t.room.onJoin.add((()=>{t.roomJoined=!0;for(let e in s)for(let t in s[e])this[e](...s[e][t])})),t.room.listen("board/:id",(function(e){"add"===e.operation&&(n.setSize(500,500),n.createSquare(0,0,e.value.width,e.value.height,e.value.color))}))},addConnectEvent:function(e,t){const{connectEvents:i}=this;i[e]||(i[e]=[]),i[e].push(t)},canSend:function(){return this.game.roomJoined},sendAction:function(e,t){t?this.game.room.send({[e]:!0,...t}):this.game.room.send({[e]:!0})},myId:function(){return this.game.room.sessionId}},server:{handleActions:function(e,t){const i={...this.defaultActions,...e};for(let e in i)t[e]&&i[e](t)}}}},800:e=>{const t={drawBackground:function(e,t=1,i=this.game.width,s=this.game.height){const{game:n}=this,a=n.add.sprite(0,0,e);a.setScale(t),a.depth=0;let{width:o,height:c}=a;o*=t,c*=t;for(let a=0;a<=Math.floor(i/o)+1;a++)for(let i=0;i<=Math.floor(s/c)+1;i++)if(a>0||i>0){const s=n.add.sprite(o*a,c*i,e);s.setScale(t),s.depth=0}},createSquare:function(e,t,i,s,n,a=0){const o=new Phaser.Geom.Rectangle(i,s,e,t),c=this.game.add.graphics({fillStyle:{color:"0x"+n},depth:a});return c.fillRectShape(o),c},updateSquare:function(e,t,i,s,n,a){const o=new Phaser.Geom.Rectangle(e,t,i,s);a.clear(),a.fillStyle={color:"0x"+n},a.fillRectShape(o)},createSprite:function(e,t,i,s=1){let n=this.game.add.sprite(t,i,e);return n.setScale(s),n},getSpriteSize:function(e,t=1){let i=this.game.add.sprite(-100,-100,e),{width:s,height:n}=i;return i.destroy(),s*=t,n*=t,{width:s,height:n}}},i={setupBoard:function(e,t,i){this.boardWidth=e,this.boardHeight=t,this.game.state.board.board={width:e,height:t,color:i}},getSize:function(e){const{sizes:t}=this.game;let i={width:0,height:0};return Object.keys(t).includes(e)&&(i=t[e]),i}};e.exports={client:t,server:i}},417:e=>{const t={setBounds:function(e,t){e>0&&(this.game.gameWidth=e),t>0&&(this.game.gameHeight=t)},checkBounds:function(e,t,i){const{gameWidth:s,gameHeight:n}=this.game;let a=!0,o=-1;if(s&&n){const c="x"===t?s:n,r="x"===t?e.width:e.height,l="x"===t?e.width/2:e.height/2;e[t]-l+i<0?(a=!1,o=l):e[t]-l+i+r>c&&(a=!1,o=c-r+l)}return{validMove:a,fallbackPos:o}},move:function(e,t,i){let s=!0,n=-1;const a=this.checkBounds(e,t,i);a.validMove||(s=!1,n=a.fallbackPos);const o=this.checkBarriers(e,t,i);o.validMove||(s=!1,n=o.fallbackPos),s?e[t]+=i:e[t]=n},purchase:function(e,t="score",i,s,n=1){e[t]>=i&&(e[t]-=i,e[s]+=n)},setDefaultActions:function(){const{state:e,sizes:t}=this.game;this.defaultActions={setSpriteSize:i=>{const{type:s,width:n,height:a}=i;t[s]={width:n,height:a},Object.values(e[s]).forEach((e=>{e.width=n,e.height=a}))}}},runGameLoop:function(){const e=this;let t=Date.now();this.game.onUpdate&&setImmediate((function i(){const s=Date.now(),n=s-t;n>0&&(e.game.onUpdate(n),t=s),setImmediate(i)}))}};e.exports={client:{setSize:function(e,t){const{game:i}=this;e>0&&(i.width=e),t>0&&(i.height=t)},loadImage:function(e,t){return this.game.load.image(e,"asset/"+t)},setupKeys:function(e){const{game:t,addConnectEvent:i}=this;t.roomJoined?this.keys=this.game.input.keyboard.addKeys(e):i("setupKeys",[e])},getKeysDown:function(){const e={};for(let t in this.keys)e[t]=this.keys[t].isDown;return e},cameraFollow:function(e){this.game.cameras.main.startFollow(e)},cameraBounds:function(e=this.game.width,t=this.game.height){this.game.cameras.main.setBounds(0,0,e,t)},sendSpriteSize:function(e,t=1){this.canSend()?this.game.textures.exists(e)&&this.sendAction("setSpriteSize",{type:e,...this.getSpriteSize(e,t)}):this.addConnectEvent("sendSpriteSize",[e,t])}},server:t}},225:(e,t,i)=>{const s=i(222),n=i(228),a=i(939),o=i(800),c=i(417),r=i(488),l=i(281),h=i(892),d=i(541),u=i(83),m=i(737),p={...s.client,...n.client,...o.client,...c.client,...r.client,...l.client,...u.client,...a.client},g={...s.server,...n.server,...o.server,...c.server,...r.server,...h.server,...d.server,...u.server,...a.server,...m.server};e.exports={clientMethods:p,serverMethods:g,linkMethods:function(e,t){for(let i in t)e[i]=t[i].bind(e)},version:"1.0.4"}},939:e=>{const t={useItemBar:function(e=0){let t=document.getElementById("item-bar");t.style.display="flex",t.style.opacity="50%";for(let i=0;i<e;i++){let e=document.createElement("div");e.className=0===i?"item selected":"item",t.appendChild(e);let s=document.createElement("div");s.className="used",e.appendChild(s)}},hideItemBar:function(){document.getElementById("item-bar").style.display="none"},showItemBar:function(){let e=document.getElementById("item-bar");e.style.display="flex",e.style.opacity="50%"}},i={createNewItem:function(e,t,i){this.game.state[e]={},this.game.shapes[e]="circle",this.items[e]={name:e,useItem:i,image:t},this.setupCharacters(e,{rotation:0})},addItemToCharacter:function(e,t,i){this.items[t]&&(e.items[t]={...this.items[t],index:Object.keys(e.items).length,uses:i})},useItem:function(e,t){const i=Object.values(e.items).find((t=>t.index===e.selectedItem));if(i.uses>0||void 0===i.uses){const s=this;void 0!==i.uses&&(i.uses-=1);let n={swingItem:(t,n)=>{void 0===t&&(t=30),void 0===n&&(n=50),i.swinging=!0,s.playAnimation(e,"rotation",t*Math.PI/180,n),setTimeout((function(){s.playAnimation(e,"rotation",-t*Math.PI/180,n),setTimeout((()=>i.swinging=!1),2*n+2)}),n+1)},throwItem:(t,n,a,o)=>{void 0===o&&(o=1),void 0===a&&(a=1e3);let c=s.getItemPosition(e),r=s.nextCharacterId(i.name);this.counts[i.name]||s.setupCharacters(i.name),s.createACharacter(i.name,r,{x:c.x,y:c.y});let l=s.getACharacter(i.name,r),h=Math.cos(Math.atan((n-l.y)/(t-l.x)))*a,d=Math.sin(Math.atan((n-l.y)/(t-l.x)))*a;t-l.x<0&&(h=-h,d=-d);let u=1e3/(o/10);s.playAnimation(l,"x",h,u),s.playAnimation(l,"y",d,u),setTimeout((function(){s.deleteACharacter(i.name,r)}),u+1)},placeItem:(t,n)=>{let a=s.nextCharacterId(i.name);if(void 0!==t&&void 0!==n)s.createACharacter(i.name,a,{x:t,y:n,scale:i.scale});else{let t=s.getItemPosition(e);s.createACharacter(i.name,a,{x:t.x,y:t.y,rotation:e.rotation,scale:i.scale})}}};i&&i.useItem(e,t,n)}},switchItem:function(e,t){void 0!==t?e.selectedItem=t:e.selectedItem+=1,e.selectedItem>=Object.keys(e.items).length&&(e.selectedItem=0)},removeItemFromCharacter:function(e,t){for(item in"string"==typeof t?delete e.items[t]:(newType=Object.keys(e.items).find((i=>e.items[i].index===t)),delete e.items[newType]),e.items)e.items[item].index>t&&(e.items[item].index-=1)},getSelectedItem:function(e){return Object.values(e.items).find((t=>t.index===e.selectedItem))},getItem:function(e){return this.items[e]},getItemPosition:function(e){let t=Object.values(e.items).find((t=>t.index===e.selectedItem)),i=e.rotation;const{x:s,y:n}=t;let a=s*Math.cos(i)-n*Math.sin(i),o=s*Math.sin(i)+n*Math.cos(i);return{x:e.x+a,y:e.y+o}}};e.exports={client:t,server:i}},83:e=>{const t={setupLocations:function(e){this.game.state[e]={}},createALocation:function(e,t,i,s,n){this.game.state[e][t]={...i,color:s,rules:n}},handleLocations:function(e,t){const i=this;Object.values(this.game.state[e]).forEach((s=>{const{width:n,height:a,x:o,y:c}=s;this.game.sizes[e]?i.handleCollision(t,s,(function(e,t){t.rules(e)})):i.handleCollision(t,{...s,x:o+n/2,y:c+a/2},(function(e,t){t.rules(e)}))}))},nextLocationId:function(e){return`${e}${Object.keys(this.game.state[e]).length+1}`}};e.exports={client:{addLocations:function(e,t=1){this.game[e]={},this.game.scales[e]=t,this.sendSpriteSize(e,t)},getLocations:function(e,t=function(){},i=function(){},s=function(){}){const{game:n}=this,a=this;n.roomJoined?(n.room.listen(e+"/:id",(function(s){if("add"===s.operation){const{id:i,x:o,y:c,width:r,height:l,color:h}=s.value;if(n.textures.exists(e)){const t=n.add.sprite(o,c,e);t.setScale(n.scales[e]||1),n[e][i]={sprite:t,...s.value}}else{const t=a.createSquare(r,l,o,c,h);n[e][i]={graphics:t,...s.value}}t(n[e][i],s.value)}else if("remove"===s.operation){const{id:t}=s.path,{graphics:a,sprite:o}=n[e][t];a&&a.destroy(),o&&o.destroy(),delete n[e][t],i(t)}})),n.room.listen(e+"/:id/:attribute",(function(t){if("replace"===t.operation){const{id:i,attribute:o}=t.path,c=n[e][i];!c.graphics||"x"!==o&&"y"!==o&&"width"!==o&&"height"!==o&&"color"!==o?!c.sprite||"x"!==o&&"y"!==o?c[o]=t.value:c.sprite[o]=t.value:(c[o]=t.value,a.updateSquare(c.width,c.height,c.x,c.y,c.color,c.graphics)),s(i,o,t.value)}}))):this.addConnectEvent("getLocations",[e,t,i,s])}},server:t}},488:e=>{const t={setupResources:function(e){this.game.state[e]={},this.counts[e]=0},createResources:function(e,t){for(let i=0;i<t;i++){let t=Math.random()*this.boardWidth,i=Math.random()*this.boardHeight;this.createAResource(e,t,i)}},createAResource:function(e,t,i){this.counts[e]+=1,this.game.state[e][this.counts[e]]={id:this.counts[e],x:t,y:i,type:"resource",height:103,width:61}},deleteAResource:function(e,t){delete this.game.state[e][t]}};e.exports={client:{addResources:function(e){this.game[e]={}},getResources:function(e,t=function(){},i=function(){},s=function(){}){const{game:n}=this;n.roomJoined?(n.room.listen(e+"/:id",(function(s){if("add"===s.operation){const{id:i,x:a,y:o}=s.value;n[e][i]={sprite:n.add.sprite(a,o,e),id:i},t(n[e][i],s.value)}else if("remove"===s.operation){const{id:t}=s.path;n[e][t].sprite.destroy(),delete n[e][t],i(t)}})),n.room.listen(e+"/:id/:attribute",(function(t){if("replace"===t.operation){const{id:i,attribute:a}=t.path;n[e][i].sprite[a]=t.value,s(i,a,t.value)}}))):this.addConnectEvent("getResources",[e,t,i,s])}},server:t}},281:e=>{function t(e){const t=document.getElementById("input-overlay");e&&t.classList.contains("hide")?t.classList.remove("hide"):e||t.classList.contains("hide")||t.classList.add("hide")}function i(e){console.log(e+" is joining...")}const s=e=>e.join("\n");function n({lives:e}){const t=[];for(let i=0;i<e;i++)t.push('<span class="life"></span>');return s(t)}const a={StoreItem:class{constructor(e,t,i,s,n){this.image="asset/"+e,this.name=t,this.costAttr=i,this.cost=s,this.action=n}},useLoginScreen:function(e=i,n="IO Game",a="Display Name",o="START"){const c=document.querySelector("#input-overlay > form.login");c.innerHTML=s([`<h1>${n}</h1>`,`<input id="displayName" type="text" placeholder="${a}" />`,'<div id="characters" class="hide"></div>',`<button type="submit">${o}</button>`]),t(!0),c.classList.remove("hide"),c.onsubmit=function(i){i.preventDefault();const s=document.getElementById("displayName").value||"player";c.classList.add("hide"),t(!1);let n=document.querySelector(".selectedCharacter");n?e(s,n.name):e(s)}},useHowToScreen:function(e="How To",t,i){const n=document.querySelector("#input-overlay > form.login");let a=document.createElement("div");a.id="howTo",a.innerHTML="?",document.getElementById("exit-button").onclick=function(e){e.preventDefault(),document.querySelector("#input-overlay > div.howTo").classList.add("hide")},a.onclick=function(n){n.preventDefault();const a=document.querySelector("#input-overlay > div.howTo > div.descriptions"),o=document.querySelector("#input-overlay > div.howTo > div.contributors");document.querySelector("#input-overlay > div.howTo").classList.remove("hide");let c=[];for(key in t)c.push(`<div class='description'><h3>${key}</h3><p>${t[key]}</p></div>`);let r=[];for(key in i)r.push(`<div class='description'><h3>${key}</h3><p>${i[key]}</p></div>`);a.innerHTML=s([`<h1>${e}</h1>`,...c]),o.innerHTML=s(["<h1>Contributors</h1>",...r])},n.prepend(a)},usePlayerSelectScreen:function(e){const t=document.querySelector("#input-overlay > form.login > div#characters");for(key in t.classList.remove("hide"),newCharacters=[],e){let i=document.createElement("div");i.classList.add("character"),i.style.background=`url(../asset/${e[key]})`,i.style.backgroundSize="contain",i.style.backgroundPosition="center",i.style.backgroundRepeat="no-repeat",i.name=key,i.onclick=function(){document.querySelector(".selectedCharacter").classList.remove("selectedCharacter"),i.classList.add("selectedCharacter")};const s=document.createElement("div");s.appendChild(i),t.appendChild(s)}document.querySelector(".character").classList.add("selectedCharacter")},handleLeaderboard:function(e,t="Leaderboard"){const{game:i}=this;document.querySelector("#game-overlay > .leaderboard").innerHTML=s([`<h3>${t}</h3>`,...Object.entries(i[e]).sort((([e,t],[i,s])=>"number"==typeof t.score&&"number"==typeof s.score?s.score-t.score:1)).map((([e,t])=>`<div class="player" id="${e}">\n      ${"number"==typeof t.lives?s(['<div class="lives">',n(t),"</div>"]):""}\n        <div class="text">\n          ${"string"==typeof t.name?s(['<p class="name"'+(this.myId()===e?' style="color: #8BE1FF;"':"")+">",t.name,"</p>"]):""}\n          ${"number"==typeof t.score?s(['<p class="score"'+(this.myId()===e?' style="color: #8BE1FF;"':"")+">",t.score,"</p>"]):""}\n        </div>\n      </div>`))])},useStore:function(e="Store",t){document.querySelector("#input-overlay > .store").innerHTML=s([`<h1>${e}</h1>`,...t.map((e=>`<div class="store-item">\n    <img src="${e.image}" />\n    <h2>${e.name}</h2>\n    <p>Cost: ${e.cost} x ${e.costAttr}</p>\n    <button id="${e.action}">Buy</button>\n    </div>`))]);const i=this;t.forEach((e=>{document.getElementById(e.action).onclick=function(){i.sendAction(e.action)}}))},toggleStore:function(){const e=document.querySelector("#input-overlay > .store");!e.classList.contains("locked")&&e.classList.contains("hide")?(t(!0),e.classList.remove("hide"),e.classList.add("locked")):e.classList.contains("locked")||(t(!1),e.classList.add("hide"),e.classList.add("locked"))},unlockStore:function(){const e=document.querySelector("#input-overlay > .store");e.classList.contains("locked")&&e.classList.remove("locked")}};e.exports={client:a}},391:e=>{"use strict";e.exports=require("colyseus.js")}},t={},function i(s){if(t[s])return t[s].exports;var n=t[s]={exports:{}};return e[s](n,n.exports,i),n.exports}(754);var e,t}));